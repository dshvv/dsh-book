---
hide_title: true
---

import CodeBlock from "@theme/CodeBlock";
import store from "!!raw-loader!/src/components/DocsRedux/LuoyongApp/store/index.js";
import App from "!!raw-loader!/src/components/DocsRedux/LuoyongApp/App.js";
import Tips from "!!raw-loader!/src/components/DocsRedux/LuoyongApp/compnents/Tips.js";
import actionCreator from "!!raw-loader!/src/components/DocsRedux/LuoyongApp/store/action-creator.js";
import TipsUseAcr from "!!raw-loader!/src/components/DocsRedux/LuoyongApp/compnents/TipsUseAcr.js";

![tu](/img/redux/1.1.svg)    
ğŸ‘‰[redux å®˜æ–¹æ–‡æ¡£](http://cn.redux.js.org/introduction/getting-started) ğŸ‘ˆ

è£¸ç”¨çš„æ„æ€æ˜¯ï¼Œåªç”¨ä¸€ä¸ªreduxåº“ï¼Œå…¶ä»–ä»€ä¹ˆè¾…åŠ©åŒ…éƒ½ä¸å®‰è£…ä½¿ç”¨ã€‚

## å®šä¹‰ store

<CodeBlock language="js" title="src/store/index.js">
  {store}
</CodeBlock>

## ä½¿ç”¨çŠ¶æ€

<CodeBlock language="jsx" title="src/App.jsx">
  {App}
</CodeBlock>

## æ›´æ–°çŠ¶æ€

<CodeBlock language="jsx" title="src/components/Tips.jsx">
  {Tips}
</CodeBlock>

## ä¼˜åŒ–ä»£ç 

![2.1](/img/redux/2.1.svg)

ä»¥ä¸Šçš„å†™æ³•å’Œç”¨æ³•éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ˜¯æœ€åŸºæœ¬çš„æ ‡å‡†çš„ç”¨æ³•ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸Šï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰å¾ˆå¤šä¼˜åŒ–çš„åœ°æ–¹ã€‚

**ğŸ‘©â€ğŸ”§ ä¼˜åŒ– action**  
åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œç›´æ¥æŠŠ action å†™åœ¨ç»„ä»¶ä¸­ï¼Œä¼šå¾ˆæ•£ä¹±ï¼Œä¸å¥½ç»Ÿä¸€ç®¡ç†ï¼Œè€Œä¸”ä¹Ÿæ— æ³•è¾¾åˆ°å¤ç”¨æ€§ï¼Œæ‰€ä»¥å¦‚æœ action å¤šäº†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¸€ä¸ªè¾…åŠ©ç”¨å‡½æ•°æ¥ç”Ÿæˆï¼Œè¿™ä¸ªå‡½æ•°ä¿—ç§° action creatorï¼Œå³ action ç”Ÿæˆå™¨ã€‚

æˆ‘ä»¬æå–å‡ºä¸€ä¸ª action ç”Ÿæˆå™¨ï¼š

<CodeBlock language="js" title="src/store/action-creator.js">
  {actionCreator}
</CodeBlock>

ç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨

<CodeBlock language="jsx" title="src/components/Tips.jsx">
  {TipsUseAcr}
</CodeBlock>

ç”šè‡³æˆ‘ä»¬å¯ä»¥æ›´è¿‘ä¸€æ­¥å°è£…, å°† action creator çš„åˆ›å»ºä¹Ÿæå–å‡ºæ¥

```javascript title="src/store/redux-helper.js"
/**
 * ç”ŸæˆactionCreator
 * @param actionçš„typeå­—æ®µ
 * @return actionCreator
 */
export const creatActionCreator = (type) => {
  const actionCreator = (payload) => {
    return { type, payload };
  };
  return actionCreator;
};
```

ç„¶åæˆ‘ä»¬å†æ¥åˆ›å»ºä¸€ä¸ª action createrï¼Œ çœ‹çœ‹æ˜¯ä¸æ˜¯å˜å¾—æ›´ç®€æ´äº†

```javascript title="src/store/action-creator.js"
import { creatActionCreator } from "./redux-helper";

// creatActionCreator æ¥åˆ›å»ºtypeä¸ºSET_MSG çš„actionCreator
export const setMsg = creatActionCreator("SET_MSG");
```

**ğŸ‘©â€ğŸ”§ ä¼˜åŒ– reducer**  
Reducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—å½“å‰çš„ state å’Œ actionï¼Œï¼ˆé€šè¿‡å†…éƒ¨çš„é€»è¾‘å¤„ç†ï¼Œå®ƒæ¥å†³å®šå¦‚ä½•æ›´æ–°æ•°æ®å³ï¼‰è¿”å›æ–°çš„ stateã€‚  
åŒæ ·çš„ï¼ŒåŸç”Ÿå†™æ³•ä¹Ÿè¿‡äºæ ·æ¿åŒ–ï¼Œä»£ç å¾ˆå¤šæ˜¯é‡å¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å…¶ä¼˜åŒ–ã€‚

æˆ‘ä»¬æå–å‡ºä¸€ä¸ª reducer ç”Ÿæˆå™¨ï¼š

```javascript title="src/store/redux-helper.js"
/**
 * ç”Ÿæˆä¸€ä¸ªreducer
 * @param handlersä¿®æ”¹çŠ¶æ€çš„é€»è¾‘å‡½æ•°ï¼ŒinitialStateä¸ºçŠ¶æ€åˆå§‹å€¼
 * @return è¿”å›ä¸€ä¸ªreducerå‡½æ•°
 */
export const creatReducer = (handlers, initialState) => {
  const reducer = (state = initialState, action) => {
    let finallyState = initialState;
    for (const key in handlers) {
      if (action.type === key) {
        finallyState = handlers[key](state, action);
      }
    }
    return finallyState;
  };
  return reducer;
};
```

ç„¶åçœ‹çœ‹ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯å˜å¾—ç®€æ´èµ·æ¥äº†

```js title="src/store/index.js"
import { createStore } from "redux";
import { creatReducer } from "./redux-helper";
import { setMsg } from "./action-creator";

// state
const initialState = {
  msg: "å¼ ä¸‰",
};

// reducer
const reducer = creatReducer(
  {
    [setMsg().type](state, action) {
      return { ...state, ...{ msg: action.payload } };
    },
  },
  initialState
);

// store
export default createStore(reducer);
```

**æ€»ç»“**  
å¦‚ä¸Šè¯´çš„ä¼˜åŒ–ï¼Œå…¶å®å°±æ˜¯æä¾›äº†ä¸¤ä¸ªç”Ÿæˆå™¨ï¼Œä¸€ä¸ªæ˜¯`creatActionCreator`,ä¸€ä¸ªæ˜¯`creatReducer`ã€‚

å…¶å®è¿™äº›å·²ç»æœ‰äººå¸®æˆ‘ä»¬å†™äº†ï¼Œå¹¶ä¸”è¿˜æ‰“åŒ…ä¸Šä¼ åˆ° npm ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦ä¸‹è½½æ—¢å¯ä»¥æ˜¯å³å¯ï¼Œå«åš[redux-actions](https://github.com/redux-utilities/redux-actions)ã€‚
åœ¨ä»¥å‰å¤§å®¶éƒ½ç”¨è¿™ä¸ªåŒ…ï¼Œæ¥ç®€åŒ– redux çš„ä½¿ç”¨ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½œè€…è²Œä¼¼å·²ç»ä¸æ€ä¹ˆç»´æŠ¤è¿™ä¸ªåº“äº†ï¼Œè€Œä¸”å®ƒè¿˜ä¸æ˜¯å®˜æ–¹å‡ºçš„ã€‚

å¹¸è¿çš„æ˜¯ï¼ŒfaceBook å®˜æ–¹å·²ç»æ³¨æ„åˆ°äº†è¿™ä¸ªæƒ…å†µï¼Œäºæ˜¯è‡ªå·±åœ¨å¾ˆæ—©ä¹‹å‰ç€æ‰‹å¹¶ä¸”ç°åœ¨å·²ç»å‘è¡Œäº†å®˜æ–¹çš„ redux è¾…åŠ©å·¥å…·åŒ…ï¼Œå«åš[redux-toolkit](https://redux-toolkit.js.org)ï¼Œé‡Œè¾¹æä¾›äº†å¾ˆå¤šä½¿ç”¨çš„ä¸œè¥¿ï¼Œå…¶ä¸­å°±å°±åŒ…æ‹¬ä»¥ä¸Šä¸¤ä¸ªç”Ÿæˆå™¨ã€‚
